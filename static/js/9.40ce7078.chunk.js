(this.webpackJsonpprelaunch=this.webpackJsonpprelaunch||[]).push([[9],{149:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(11),c=n(0),r=n(505),i=n(516),o=n(134),s=n.n(o),u=n(113),l=n(179),j=n.n(l),d=n(50),b=n(3);function h(e){var t=e.message;return!0===e.error?Object(b.jsxs)(u.a,{direction:"row",spacing:2,justifyContents:"space-between",alignItems:"center",children:[Object(b.jsx)(s.a,{fontSize:"small",color:"error"}),Object(b.jsx)(d.a,{children:t})]}):Object(b.jsxs)(u.a,{direction:"row",spacing:2,justifyContents:"space-between",alignItems:"center",children:[Object(b.jsx)(j.a,{fontSize:"small",color:"success"}),Object(b.jsx)(d.a,{children:t})]})}function O(e){var t=e.snackBarOpen,n=e.message,o=e.onClose,u=e.error,l=Object(c.useState)(t),j=Object(a.a)(l,2),d=j[0],O=j[1],x=Object(c.useState)(n),f=Object(a.a)(x,2),p=f[0],m=f[1];Object(c.useEffect)((function(){return O(t)}),[t]),Object(c.useEffect)((function(){return m(n)}),[n]);var g=function(){O(!1),m(null),o()},y=Object(b.jsx)(i.a,{size:"small","aria-label":"close",color:"inherit",onClick:g,children:Object(b.jsx)(s.a,{fontSize:"small"})});return Object(b.jsx)(r.a,{open:d,autoHideDuration:3e3,onClose:g,message:Object(b.jsx)(h,{message:p,error:u}),action:y,anchorOrigin:{vertical:"top",horizontal:"center"}})}O.defaultProps={error:!1}},158:function(e,t,n){},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(11),c=n(0);function r(e){var t=Object(c.useState)(e),n=Object(a.a)(t,2),r=n[0],i=n[1];Object(c.useEffect)((function(){return i(e)}),[e]);return[r,i,function(e){i(e.target.value)}]}},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(11),c=n(0);function r(e){var t=Object(c.useState)(e),n=Object(a.a)(t,2),r=n[0],i=n[1];return[r,i,function(e){var t=new Date(e);if(e){var n=t.toLocaleDateString("en-in",{day:"numeric",month:"long",year:"numeric"});i(n)}else i(null)}]}},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(11),c=n(0);function r(e){var t=Object(c.useState)(e),n=Object(a.a)(t,2),r=n[0],i=n[1];return[r,i,function(e){return i(e.target.value)}]}},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(516),c=n(134),r=n.n(c),i=n(108),o=n(3);function s(e){var t=e.size,n=e.handleClick;return Object(o.jsx)(a.a,{size:t,sx:{color:"black",bgcolor:Object(i.a)("#fff",.4),position:"absolute",top:10,right:12},onClick:n,children:Object(o.jsx)(r.a,{size:t})})}s.defaultProps={size:"small"}},190:function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var a=n(11),c=n(128),r=n(129),i=n.n(r),o=n(0),s=n(4),u=n(518),l=n(522),j=n(94),d=n(180),b=n.n(d),h=n(493),O=n(136),x=n(481),f=n(516),p=n(137),m=n.n(p),g=n(3);function y(){return Object(g.jsxs)(j.a,{sx:{alignItems:"center"},onClick:function(){},children:[Object(g.jsx)(f.a,{"aria-label":"update",sx:{bgcolor:"form.input"},onClick:function(){},children:Object(g.jsx)(m.a,{})}),"Edit"]})}var v=n(178),k=n.n(v);function w(){return Object(g.jsxs)(j.a,{sx:{alignItems:"center"},children:[Object(g.jsx)(f.a,{"aria-label":"delete",sx:{bgcolor:"form.input"},children:Object(g.jsx)(k.a,{})}),"Delete"]})}var C=n(149),S=n(450),I=n(523),z=n(517),E=n(510),D=n(50),M=n(113),P=n(490);function R(e){var t=e.confirm,n=e.handleCallback,c=e.handleCloseCallback,r=e.title,i=e.message,s=Object(o.useState)(t),u=Object(a.a)(s,2),l=u[0],d=u[1];Object(o.useEffect)((function(){return d(t)}),[t]);var b=function(){d(!1),c()};return Object(g.jsxs)(z.a,{open:l,sx:{backgroundColor:"faded.black"},children:[Object(g.jsx)(P.a,{children:r}),Object(g.jsxs)(j.a,{sx:{p:2},children:[Object(g.jsx)(D.a,{sx:{pb:2},children:i}),Object(g.jsxs)(M.a,{spacing:2,direction:"row",children:[Object(g.jsx)(E.a,{variant:"contained",onClick:b,children:"Cancel"}),Object(g.jsx)(E.a,{variant:"outlined",onClick:function(){b(),n()},children:"OK"})]})]})]})}function U(e){var t=e.deleteItem,n=e.updateItem,c=e.snackBar,r=e.confirmMessage,i=e.handleDeleteObject,s=e.handleEditClick,u=Object(o.useState)(!1),l=Object(a.a)(u,2),j=l[0],d=l[1],h=Object(o.useState)(null),O=Object(a.a)(h,2),x=O[0],f=O[1],p=Boolean(x),m=function(){return f(null)};return Object(g.jsxs)("div",{children:[Object(g.jsx)(b.a,{onClick:function(e){return f(e.currentTarget)}}),Object(g.jsxs)(S.a,{id:"basic-menu",anchorEl:x,open:p,onClose:m,MenuListProps:{"aria-labelledby":"basic-button"},sx:{borderRadius:"10px"},children:[Object(g.jsx)(I.a,{onClick:function(){s(),m()},children:n}),Object(g.jsx)(I.a,{onClick:function(){d(!0),m()},children:t})]}),Object(g.jsx)(R,{title:"Delete Memory",confirm:j,handleCallback:i,handleCloseCallback:function(){return d(!1)},message:r}),c]})}var L=n(138);function T(){return(T=Object(c.a)(i.a.mark((function e(t,n,a,c){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.deleteMemory(t,n,a);case 3:r=e.sent,c(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function B(e){var t,n=e.header,c=e.subheader,r=e.photoLayout,i=e.storyLayout,d=e.bucket,f=e.memoryID,p=e.authURL,m=e.handleEditClick,v=e.preview,k=Object(o.useState)(null),S=Object(a.a)(k,2),I=S[0],z=S[1],E=Object(o.useState)(null),D=Object(a.a)(E,2),M=D[0],P=D[1],R=Object(o.useState)(null),L=Object(a.a)(R,2),B=L[0],Y=L[1],N=Object(O.a)();t=Object(x.a)(N.breakpoints.down("lg"))?"":"vertical-scroll";var A=function(e,t){P(e),Y(t)},F=function(e){"ok"===e.status?A("Memory deleted successfully",!1):A("Error while deleting memory",!0),z(!0)},H=Object(g.jsx)(C.a,{snackBarOpen:I,message:M,onClose:function(){z(!1),P(null),Y(null)},error:B}),W=v?Object(g.jsx)(b.a,{}):Object(g.jsx)(U,{confirmMessage:"Do you want to delete this memory?",snackBar:H,handleDeleteObject:function(){!function(e,t,n,a){T.apply(this,arguments)}(d,p,f,F)},deleteItem:Object(g.jsx)(w,{}),updateItem:Object(g.jsx)(y,{}),handleEditClick:m});return!1===I?Object(g.jsx)(s.a,{to:"/memories",replace:!0}):Object(g.jsxs)(u.a,{sx:{boxShadow:0,bgcolor:"button.main",p:1},children:[Object(g.jsx)(l.a,{title:n,subheader:c,action:W}),Object(g.jsx)(h.a,{}),Object(g.jsxs)(j.a,{sx:{display:"flex",justifyContent:"flex-start",flexDirection:{lg:"row",xs:"column"},height:{lg:"72vh"},my:1},children:[Object(g.jsx)(j.a,{sx:{width:{lg:"70%",xs:"100%"},overflowY:"scroll",borderRadius:5},className:t,children:r}),Object(g.jsx)(j.a,{sx:{width:{lg:"30%",sx:"100%"},overflowY:"scroll",mt:{lg:0,xs:2},p:{lg:1},px:1},className:t,children:i})]})]})}},220:function(e,t,n){"use strict";n.d(t,"a",(function(){return we}));var a=n(53),c=n(128),r=n(11),i=n(129),o=n.n(i),s=n(0),u=n(4),l=n(510),j=n(521),d=n(179),b=n.n(d),h=n(249),O=n.n(h),x=n(50),f=n(113),p=n(517),m=n(518),g=n(522),y=n(520),v=n(493),k=n(94),w=n(246),C=n.n(w),S=n(245),I=n.n(S),z=n(516),E=n(239),D=n.n(E),M=n(242),P=n(3),R=Object(M.bindKeyboard)(Object(M.autoPlay)(Object(M.virtualize)(D.a)));function U(e){var t=e.ind,n=e.images,a=e.handleNext,c=e.handleStepChange,i=Object(s.useState)(t),o=Object(r.a)(i,2),u=o[0],l=o[1],j=Object(s.useState)(0),d=Object(r.a)(j,2),b=d[0],h=d[1],O=Object(s.useState)(null),x=Object(r.a)(O,2),f=x[0],p=x[1];Object(s.useEffect)((function(){l(t)}),[t]),Object(s.useEffect)((function(){b<n.length?p("none"):p("flex")}),[b]);var m=function(){return h((function(e){return e+1}))};return Object(P.jsx)(R,{index:u,onChangeIndex:c,enableMouseEvents:!0,animateTransitions:!0,interval:1e4,onClick:a,style:{backgroundColor:"muted.main"},slideRenderer:function(e){var t=e.index,a=e.key,c=function(e,t){var n=e%t;return n<0?n+t:n}(t,n.length),r=(n[c].images?n[c].images.map((function(e){var t=e.src,n=e.width;return"".concat(t," ").concat(n,"w")})):[]).join(",");return Object(P.jsx)(k.a,{component:"img",onLoad:m,sx:{display:{display:f},justifyContents:"center",width:"100%",bgcolor:"#1c1c1c"},src:n[c].src,srcSet:r,style:{display:"block",boxSizing:"content-box",cursor:"pointer",objectFit:"contain",height:"100vh"},alt:n[c].src},a)}})}U.defaultProps={ind:0};var L=n(177);function T(e){var t=e.handleClick;return Object(P.jsx)(z.a,{edge:"start",color:"primary","aria-label":"close",onClick:t,sx:{position:"absolute",top:"50%",right:0,transform:"translate(0%, -50%)"},children:Object(P.jsx)(I.a,{sx:{color:"button.main",fontSize:"4.5rem"}})})}function B(e){var t=e.handleClick;return Object(P.jsx)(z.a,{edge:"start",color:"primary","aria-label":"close",onClick:t,sx:{position:"absolute",top:"50%",left:0,transform:"translate(0%, -50%)"},children:Object(P.jsx)(C.a,{sx:{color:"button.main",fontSize:"4.5rem"}})})}function Y(e){var t=e.open,n=e.title,a=e.date,c=e.images,r=e.index,i=e.handleNext,o=e.handleBack,s=e.handleClose,u=e.handleChange;return Object(P.jsxs)(p.a,{open:t,fullScreen:!0,children:[Object(P.jsx)(U,{images:c,ind:r,handleNext:i,handleStepChange:u}),Object(P.jsx)(g.a,{title:n,subheader:a,sx:{position:"absolute",top:10,left:10,bgcolor:"button.main",borderRadius:3,padding:1}}),Object(P.jsx)(B,{handleClick:o}),Object(P.jsx)(T,{handleClick:i}),Object(P.jsx)(L.a,{size:"large",handleClick:s})]})}Y.defaultProps={index:0};var N=n(190),A=n(500),F=n(150),H=n.n(F),W=n(151),J=n.n(W),K=n(137),X=n.n(K),q=n(168);function V(e){var t=e.editable,n=e.text,a=e.handleTitleUpdate,c=Object(q.a)(n),i=Object(r.a)(c,3),o=i[0],u=i[1],l=i[2],j=Object(s.useState)(t),d=Object(r.a)(j,2),b=d[0],h=d[1],O=Object(s.useState)(!1),p=Object(r.a)(O,2),m=p[0],g=p[1];return Object(s.useEffect)((function(){h(t),u(n),g(!1)}),[t]),b||m?b&&!m?Object(P.jsxs)(f.a,{direction:"row",sx:{alignItems:"center"},spacing:2,children:[Object(P.jsx)(x.a,{variant:"h6",children:o}),Object(P.jsx)(X.a,{fontSize:"medium",onClick:function(){return g(!0)}})]}):b&&m?Object(P.jsxs)(f.a,{direction:"row",sx:{alignItems:"flex-end",justifyContent:"flex-start"},spacing:2,children:[Object(P.jsx)(A.a,{id:"standard-basic",size:"small",label:"Title",onChange:l,variant:"standard",defaultValue:o,sx:{maxWidth:"200px"}}),Object(P.jsx)(H.a,{fontSize:"medium",onClick:function(){a(o),g(!1)}}),Object(P.jsx)(J.a,{fontSize:"medium",onClick:function(){u(n),g(!1)}})]}):void 0:Object(P.jsx)(x.a,{variant:"h6",children:o})}var G=n(51),Q=n(498),Z=n(339),$=n(497),_=n(169);function ee(e){var t=e.editable,n=e.prevDate,a=e.handleDateUpdate,c=Object(s.useState)(t),i=Object(r.a)(c,2),o=i[0],u=i[1],l=Object(s.useState)(!1),j=Object(r.a)(l,2),d=j[0],b=j[1],h=Object(_.a)(n),O=Object(r.a)(h,3),p=O[0],m=O[1],g=O[2];return Object(s.useEffect)((function(){u(t),m(n),b(!1)}),[t,n]),o||d?o&&!d?Object(P.jsxs)(f.a,{direction:"row",sx:{alignItems:"center"},spacing:2,children:[Object(P.jsx)(x.a,{children:p}),Object(P.jsx)(X.a,{fontSize:"medium",onClick:function(){return b(!0)}})]}):o&&d?Object(P.jsxs)(f.a,{direction:"row",sx:{alignItems:"flex-end",justifyContent:"flex-start",mt:3},spacing:2,children:[Object(P.jsx)(Z.a,{dateAdapter:$.a,children:Object(P.jsx)(Q.a,{label:"Memory Date",value:p,onChange:g,placeholder:"dd/MM/yyyy",inputFormat:"dd/MM/yyyy",maxDate:new Date,renderInput:function(e){return Object(P.jsx)(A.a,Object(G.a)({readOnly:!0,required:!0},e))}})}),Object(P.jsx)(H.a,{fontSize:"medium",onClick:function(){a(p),b(!1)}}),Object(P.jsx)(J.a,{fontSize:"medium",onClick:function(){m(n),b(!1)}})]}):void 0:Object(P.jsx)(x.a,{children:p})}var te=n(496),ne=n(170);n(158);function ae(e){var t=e.editable,n=e.prevStory,a=e.handleStoryUpdate,c=Object(s.useState)(t),i=Object(r.a)(c,2),o=i[0],u=i[1],l=Object(s.useState)(!1),j=Object(r.a)(l,2),d=j[0],b=j[1],h=Object(ne.a)(n),O=Object(r.a)(h,3),p=O[0],m=O[1],g=O[2],y=Object(s.useRef)();return Object(s.useEffect)((function(){u(t),m(n),b(!1)}),[t,n]),o||d?o&&!d?Object(P.jsxs)(f.a,{direction:"column",spacing:2,children:[Object(P.jsxs)(f.a,{direction:"row",spacing:2,justifyContent:"flex-end",children:[Object(P.jsx)(x.a,{sx:{color:"muted.main"},children:"Edit Story"}),Object(P.jsx)(X.a,{fontSize:"medium",onClick:function(){b(!0)}})]}),Object(P.jsx)(v.a,{sx:{width:1}}),Object(P.jsx)(x.a,{style:{whiteSpace:"pre-wrap"},children:p})]}):o&&d?Object(P.jsxs)(f.a,{direction:"column",spacing:2,children:[Object(P.jsxs)(f.a,{direction:"row",spacing:2,justifyContent:"flex-end",children:[Object(P.jsx)(x.a,{sx:{color:"muted.main"},children:"Editing Story"}),Object(P.jsx)(H.a,{fontSize:"medium",onClick:function(){a(p),b(!1)}}),Object(P.jsx)(J.a,{fontSize:"medium",onClick:function(){m(n),b(!1)}})]}),Object(P.jsx)(v.a,{sx:{width:1}}),Object(P.jsx)(k.a,{sx:{p:2,m:1,my:2,border:1,borderColor:"primary.main",bgcolor:"input.background",minHeight:"70vh",borderRadius:5,width:"90%"},onClick:function(){return y.current.focus()},children:Object(P.jsx)(te.a,{autoFocus:!0,"aria-label":"minimum height",placeholder:"Tell your story...",value:p,onChange:g,style:{width:"100%",minHeight:"184px",maxHeight:"70vh",boxSizing:"border-box",paddingTop:"5px",border:0,overflow:"auto",outline:"none",resize:"vertical",borderRadius:5,"&:focus":{border:0}},ref:y})})]}):void 0:Object(P.jsx)(x.a,{style:{whiteSpace:"pre-wrap"},children:p})}var ce=n(210),re=n(211),ie=n(503),oe=n(524),se=n(178),ue=n.n(se),le=n(248),je=n.n(le),de=n(134),be=n.n(de),he=n(108),Oe=["alt","style"],xe=["alt","style"];function fe(e){var t=e.children,n=e.onClick,a=e.name,c=e.updateOp;return Object(P.jsx)(l.a,{id:a,variant:"contained",component:"label",onClick:n,sx:{color:c===a?"button.main":"muted.main",borderRadius:5,backgroundColor:c===a?"primary.main":"button.main",padding:"6px 8px","&:hover":{color:c===a?"button.main":"muted.main",backgroundColor:c===a?"primary.main":"button.main"}},children:t})}function pe(e){var t=e.handleChange,n=e.onClick,a=e.updateOp;return Object(P.jsxs)(fe,{onClick:n,name:"add",updateOp:a,children:[Object(P.jsx)("input",{type:"file",hidden:!0,multiple:!0,accept:"image/*",onChange:t}),Object(P.jsx)(je.a,{sx:{fontSize:"1.5rem"}}),"Add"]})}function me(e){var t=e.images,n=e.handlePhotoClick,a=e.renderPhoto,c=Object(s.useState)(null),i=Object(r.a)(c,2),o=i[0],u=i[1];return Object(s.useEffect)((function(){var e=0,n=0;t.forEach((function(t){t.height>t.width?n+=1:e+=1})),u(e>n?"rows":"columns")}),[t]),a?Object(P.jsx)(re.a,{layout:o,photos:t,onClick:n,spacing:2,renderPhoto:a}):Object(P.jsx)(re.a,{layout:o,photos:t,onClick:n,spacing:2})}function ge(e){var t=e.editable,n=e.images,a=e.handlePhotoClick,c=e.handleThumbnailUpdate,i=e.deleteImage,o=e.addImage,u=Object(s.useState)(t),j=Object(r.a)(u,2),d=j[0],b=j[1],h=Object(s.useState)(null),O=Object(r.a)(h,2),p=O[0],m=O[1],g=Object(s.useState)(null),y=Object(r.a)(g,2),v=y[0],k=y[1],w=function(e){m(p===e?null:e)};Object(s.useEffect)((function(){b(t),m(null)}),[t]);var C=Object(P.jsxs)(f.a,{direction:"row",spacing:2,children:[Object(P.jsx)(pe,{handleChange:o,onClick:function(){return w("add")},updateOp:p}),Object(P.jsxs)(fe,{onClick:function(){return w("delete")},name:"delete",updateOp:p,children:[Object(P.jsx)(ue.a,{sx:{fontSize:"1.5rem"}}),"Delete"]}),Object(P.jsx)(fe,{onClick:function(){return w("thumbnail")},name:"thumbnail",updateOp:p,children:"Set Thumbnail"})]}),S=Object(P.jsx)(f.a,{direction:"row",children:Object(P.jsxs)(x.a,{variant:"h6",color:"muted.main",children:["Images:",n.length]})});return d?d&&"delete"===p?Object(P.jsxs)(f.a,{direction:"column",spacing:2,sx:{p:2},children:[S,C,Object(P.jsx)(me,{images:n,handlePhotoClick:a,renderPhoto:function(e){var t=e.layout,a=e.imageProps,c=a.alt,r=a.style,o=Object(ce.a)(a,Oe);return Object(P.jsxs)(l.a,{component:"div",children:[Object(P.jsx)("img",Object(G.a)({alt:c,style:Object(G.a)(Object(G.a)({},r),{},{width:t.width,padding:0})},o)),Object(P.jsx)(z.a,{size:"medium",sx:{color:"black",bgcolor:Object(he.a)("#fff",.4),position:"absolute",top:10,right:12},onClick:function(){return function(e){var t=n.find((function(t){return t.alt===e}));i(t)}(c)},children:Object(P.jsx)(be.a,{size:"medium"})})]})}})]}):d&&"thumbnail"===p?Object(P.jsxs)(f.a,{direction:"column",spacing:2,sx:{p:2},children:[S,C,Object(P.jsx)(me,{images:n,handlePhotoClick:a,renderPhoto:function(e){var t=e.layout,a=e.imageProps,r=a.alt,i=a.style,o=Object(ce.a)(a,xe);return Object(P.jsxs)(l.a,{component:"div",children:[Object(P.jsx)("img",Object(G.a)({alt:r,style:Object(G.a)(Object(G.a)({},i),{},{width:t.width,padding:0})},o)),Object(P.jsx)(oe.a,{control:Object(P.jsx)(ie.a,{}),label:"",checked:r===v,onChange:function(){return function(e){k(e);var t=n.find((function(t){return t.alt===e}));c(t)}(r)},sx:{pr:1,position:"absolute",bgcolor:Object(he.a)("#fff",.6),color:"black",borderRadius:"0px 5px 5px 0px",borderColor:"secondary.main",borderLeft:0,bottom:20,left:15}})]})}})]}):d&&"add"===p||d&&!p?Object(P.jsxs)(f.a,{direction:"column",spacing:2,sx:{p:2},children:[S,C,Object(P.jsx)(me,{images:n,handlePhotoClick:a})]}):void 0:Object(P.jsx)(me,{images:n,handlePhotoClick:a})}me.defaultProps={renderPhoto:null},fe.defaultProps={onClick:function(){}};var ye=n(138),ve=n(149);function ke(e){return!1===e.preview?Object(P.jsx)(f.a,{direction:"row",justifyContent:"flex-start",sx:{backgroundColor:"button.main",paddingX:2,paddingY:1},children:Object(P.jsx)(j.a,{href:"/",underline:"none",children:Object(P.jsxs)(l.a,{variant:"contained",component:"label",sx:{color:"primary.main",backgroundColor:"button.main",padding:"6px 8px",boxShadow:0,"&:hover":{backgroundColor:"button.main"}},children:[Object(P.jsx)(O.a,{size:"medium",sx:{paddingRight:1}}),Object(P.jsx)(x.a,{variant:"body1",color:"muted.main",children:"Memories"})]})})}):null}function we(e){var t=e.memTitle,n=e.memDate,i=e.memStory,j=e.memImages,d=e.bucket,h=e.memoryID,O=e.authURL,w=e.preview,C=Object(s.useState)(!1),S=Object(r.a)(C,2),I=S[0],z=S[1],E=Object(s.useState)(!1),D=Object(r.a)(E,2),M=D[0],R=D[1],U=Object(s.useState)(0),L=Object(r.a)(U,2),T=L[0],B=L[1],A=Object(s.useState)(t),F=Object(r.a)(A,2),H=F[0],W=F[1],J=Object(s.useState)(n),K=Object(r.a)(J,2),X=K[0],q=K[1],G=Object(s.useState)(i),Q=Object(r.a)(G,2),Z=Q[0],$=Q[1],_=Object(s.useState)(j),te=Object(r.a)(_,2),ne=te[0],ce=te[1],re=Object(s.useState)(null),ie=Object(r.a)(re,2),oe=ie[0],se=ie[1],ue=Object(s.useState)(null),le=Object(r.a)(ue,2),je=le[0],de=le[1],be=Object(s.useState)([]),he=Object(r.a)(be,2),Oe=he[0],xe=he[1],fe=Object(s.useState)(null),pe=Object(r.a)(fe,2),me=pe[0],we=pe[1],Ce=Object(s.useState)([]),Se=Object(r.a)(Ce,2),Ie=Se[0],ze=Se[1],Ee=Object(s.useState)(!1),De=Object(r.a)(Ee,2),Me=De[0],Pe=De[1],Re=Object(s.useState)(null),Ue=Object(r.a)(Re,2),Le=Ue[0],Te=Ue[1],Be=Object(s.useState)(null),Ye=Object(r.a)(Be,2),Ne=Ye[0],Ae=Ye[1],Fe=Object(s.useState)(null),He=Object(r.a)(Fe,2),We=He[0],Je=He[1],Ke=Object(s.useState)(!1),Xe=Object(r.a)(Ke,2),qe=Xe[0],Ve=Xe[1],Ge=ne.length;Object(s.useEffect)((function(){return W(t)}),[t]),Object(s.useEffect)((function(){return q(n)}),[n]),Object(s.useEffect)((function(){return $(i)}),[i]),Object(s.useEffect)((function(){return ce(j)}),[j]);var Qe=function(e,t){de(e),Je(t)},Ze=function(e,t,n){401===e.status?Qe("You have been logged out. Please login to continue.",!0):403===e.status?Qe("You do not have permissions to do this operation.",!0):Qe("Unknown error occured while ".concat(t),!0),n(e.status)},$e=function(e){se(!0),Ve(e)},_e=function(){var e=Object(c.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.a.updateMemoryDetails(d,O,h,t,n);case 3:return(a=e.sent).ok?Qe("Memory ".concat(t," updated successfully"),!1):Ze(a,"updating ".concat(t),$e),se(!0),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),et=function(){var e=Object(c.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.a.updateMemoryImage(d,O,h,"thumbnail",t);case 3:return(n=e.sent).ok?(Qe("Memory thumbnail updated successfully",!1),se(!0)):Ze(n,"updating thumbnail",$e),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(c.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(ne.length>1)){e.next=8;break}return e.next=4,ye.a.updateMemoryImage(d,O,h,"delete",t);case 4:(n=e.sent).ok?(Qe("Memory image deleted successfully",!1),ce(ne.filter((function(e){return e.title!==t.title})))):Ze(n,"deleting image",$e),e.next=9;break;case 8:Qe("Atleast 1 image is needed for memory. Unable to delete",!0);case 9:return se(!0),e.abrupt("return",n);case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=Object(c.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.a.updateMemoryImage(d,O,h,"add",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(a.a)(Oe.entries()),e.prev=1,c=o.a.mark((function e(){var t,a,c,i,s,u,l,j,d,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(r.a)(n.value,2),a=t[0],c=t[1],i=Object(r.a)(c,3),s=i[0],u=i[1],l=i[2],e.next=4,nt(s).then((function(e){return e.ok?e.text():(Ze(e,"adding image",$e),"")}));case 4:return j=e.sent,d={key:"memories/".concat(h,"/images/").concat(s.name),src:l,alt:s.name,title:s.name,width:s.width,height:s.height,images:[]},e.next=8,fetch(j,{body:u,method:"PUT"});case 8:(b=e.sent).ok?(Te("Images uploaded: ".concat(a+1," / ").concat(me," ")),ce((function(e){return e.concat([d])}))):(Ae("Error while uploading memory image"),ze((function(e){return e.concat([s.name])})),Ze(b,"deleting image",$e));case 10:case"end":return e.stop()}}),e)})),t.s();case 4:if((n=t.n()).done){e.next=8;break}return e.delegateYield(c(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),t.e(e.t1);case 13:return e.prev=13,t.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)(Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Oe.length>0&&(Pe(!0),Te("Preparing images for upload....")),Oe.length!==me){e.next=9;break}return e.next=4,at();case 4:Ie.length>0?Ae("Error while uploading ".concat(Ie.length," images")):Ae("".concat(Oe.length," image(s) uploaded successfully")),ze([]),we(null),xe([]),setTimeout((function(){Pe(!1),Ae(null),Te(null)}),3e3);case 9:case"end":return e.stop()}}),e)}))),[Oe]);var ct=function(){var e=Object(c.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.files&&(n=Array.from(t.target.files),we(n.length),ne.length+n.length<=15?(n.forEach((function(e){var t=new Image;t.onload=function(){var t=Object(c.a)(o.a.mark((function t(n){var a,c,r,i,s,u,l,j;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.target.naturalHeight,c=n.target.naturalWidth,r=e.size/1048576,i=e.name,s=[500,1e3,1500].map((function(e){return{height:e,width:Math.ceil(e*c/a)}})),u=Date.now(),l="".concat(u,"-").concat(i),j=[{name:l,size:r,height:a,width:c,images:s},e,n.target.src],xe((function(e){return e.concat([j])}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.src=URL.createObjectURL(e)})),n.map((function(e){return URL.revokeObjectURL(e)}))):(Qe("Unable to add ".concat(n.length," images. Maximum images allowed per memory is 15"),!0),se(!0)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=Object(P.jsx)(V,{editable:M,text:H,handleTitleUpdate:function(e){_e("title",e)&&W(e)}}),it=Object(P.jsx)(ee,{editable:M,prevDate:X,handleDateUpdate:function(e){_e("date",e)&&q(e)}}),ot=Object(P.jsx)(ae,{editable:M,prevStory:Z,handleStoryUpdate:function(e){_e("story",e)&&$(e)}}),st=Object(P.jsx)(ge,{editable:M,images:ne,handlePhotoClick:function(e,t,n){z(!0),B(n)},handleThumbnailUpdate:et,deleteImage:tt,addImage:ct}),ut=Object(P.jsxs)(l.a,{variant:"contained",component:"label",onClick:function(){return R(!1)},sx:{color:"primary.main",borderRadius:5,backgroundColor:"button.main",padding:"6px 8px"},children:[Object(P.jsx)(b.a,{size:"medium",sx:{paddingRight:1}}),Object(P.jsx)(x.a,{variant:"body1",color:"muted.main",children:"Edit"})]});return 401===qe&&!1===oe?Object(P.jsx)(u.a,{to:"/login"}):Object(P.jsxs)(P.Fragment,{children:[M?Object(P.jsx)(f.a,{direction:"row",justifyContent:"flex-start",sx:{backgroundColor:"button.main",paddingX:2,paddingY:1},children:ut}):Object(P.jsx)(ke,{preview:w}),Object(P.jsx)(k.a,{component:"div",sx:{backgroundColor:"button.main",margin:M?"5px":0},children:Object(P.jsx)(N.a,{header:rt,subheader:it,photoLayout:st,storyLayout:ot,memoryID:h,bucket:d,authURL:O,handleEditClick:function(){return R(!0)},preview:w})}),Object(P.jsx)(Y,{open:I,title:H,date:X,images:ne,index:T,handleNext:function(){B((function(e){return(e+1)%Ge}))},handleBack:function(){B((function(e){return(e-1+Ge)%Ge}))},handleClose:function(){return z(!1)},handleChange:function(e){return B(e)}}),Object(P.jsx)(ve.a,{snackBarOpen:oe,message:je,onClose:function(){se(!1),de(null),Je(null)},error:We}),Object(P.jsx)(p.a,{open:Me,fullWidth:!0,sx:{p:1},children:Object(P.jsxs)(m.a,{sx:{maxWidth:1,p:1},children:[Object(P.jsx)(g.a,{title:"Adding Images",sx:{textAlign:"center"}}),Object(P.jsx)(v.a,{}),Object(P.jsxs)(y.a,{children:[Object(P.jsx)(x.a,{variant:"h6",sx:{color:"muted.main"},children:Le}),Object(P.jsx)(f.a,{justifyContent:"center",sx:{py:2},children:Object(P.jsx)(x.a,{variant:"h5",children:Ne})})]})]})})]})}we.defaultProps={memTitle:"Memory Title",memDate:"Memory Date",memStory:"Memory Text"}},509:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var a=n(11),c=n(128),r=n(129),i=n.n(r),o=n(4),s=n(0),u=n(138),l=n(189),j=n(220),d=n(515),b=n(211),h=n(190),O=n(273),x=[{key:1,src:O.a,width:667,height:500},{key:2,src:O.a,width:667,height:500},{key:3,src:O.a,width:375,height:500},{key:4,src:O.a,width:667,height:500},{key:5,src:O.a,width:375,height:500},{key:6,src:O.a,width:667,height:500},{key:7,src:O.a,width:667,height:500},{key:8,src:O.a,width:667,height:500},{key:9,src:O.a,width:667,height:500},{key:10,src:O.a,width:667,height:500},{key:11,src:O.a,width:375,height:500},{key:12,src:O.a,width:375,height:500},{key:13,src:O.a,width:375,height:500},{key:14,src:O.a,width:375,height:500},{key:15,src:O.a,width:667,height:500}],f=n(3);function p(){return Object(f.jsx)(h.a,{header:Object(f.jsx)(d.a,{type:"rectangular",sx:{width:{lg:"20%",md:"30%",xs:"70%"}}}),subheader:Object(f.jsx)(d.a,{type:"rectangular",sx:{width:{lg:"15%",md:"20%",xs:"60%"}}}),photoLayout:Object(f.jsx)(b.a,{layout:"rows",photos:x,spacing:2}),storyLayout:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"50%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"50%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"50%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"98%"}}),Object(f.jsx)(d.a,{type:"rectangular",sx:{width:"50%"}})]})})}var m=n(149);function g(e,t,n,a,c){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(i.a.mark((function e(t,n,a,c,r){var o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.viewMemory(t,n,a);case 3:if(!(o=e.sent).status){e.next=7;break}return r(o),e.abrupt("return");case 7:c(o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function v(e){var t=e.bucket,n=e.authURL,c=Object(o.h)().memoryId,r=Object(s.useState)(),i=Object(a.a)(r,2),u=i[0],d=i[1],b=Object(s.useState)(null),h=Object(a.a)(b,2),O=h[0],x=h[1],y=Object(s.useState)(null),v=Object(a.a)(y,2),k=v[0],w=v[1],C=Object(s.useState)(null),S=Object(a.a)(C,2),I=S[0],z=S[1],E=function(e){return d(e)},D=Object(s.useState)(null),M=Object(a.a)(D,2),P=M[0],R=M[1],U=function(e,t){w(e),z(t)},L=function(){x(!1),w(null),z(null)},T=function(e){"unauthenticated"===e.status&&(U("You have been logged out. Navigating to login page",!0),x(!0),setInterval((function(){return R("unauthenticated")}),3e3)),"forbidden"===e.status&&(U("You do not have access to this memory. Navigating to memories page",!0),x(!0),setInterval((function(){return R("forbidden")}),3e3))};return Object(s.useEffect)((function(){g(t,n,c,E,T);var e=setInterval((function(){return g(t,n,c,E,T)}),3e5);return function(){return clearInterval(e)}}),[]),"unauthenticated"===P?Object(f.jsx)(o.a,{to:"/login"}):"forbidden"===P?Object(f.jsx)(o.a,{to:"/memories"}):u?Object(f.jsxs)(l.a,{children:[Object(f.jsx)(j.a,{memTitle:u.title,memDate:u.date,memImages:u.pictures.photos,memStory:u.story,memoryID:c,bucket:t,authURL:n,preview:!1}),Object(f.jsx)(m.a,{snackBarOpen:O,message:k,onClose:L,error:I})]}):Object(f.jsxs)(l.a,{children:[Object(f.jsx)(p,{}),Object(f.jsx)(m.a,{snackBarOpen:O,message:k,onClose:L})]})}}}]);
//# sourceMappingURL=9.40ce7078.chunk.js.map